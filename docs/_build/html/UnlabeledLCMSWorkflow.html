
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Unlabeled LC-MS Workflow &#8212; Readme v0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Labeled LC-MS Workflow" href="LabeledLCMSWorkflow.html" />
    <link rel="prev" title="El-MAVEN Command Line Interface" href="IntroductiontoElMAVENCLI.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="unlabeled-lc-ms-workflow">
<h1>Unlabeled LC-MS Workflow<a class="headerlink" href="#unlabeled-lc-ms-workflow" title="Permalink to this headline">¶</a></h1>
<p>This is a tutorial for processing Unlabeled LC/MS data files through El-MAVEN.</p>
<p><strong>Contents</strong></p>
<blockquote>
<div><ul class="simple">
<li>Preprocessing</li>
<li>Launch El-MAVEN</li>
<li>Adjust Global Settings</li>
<li>Load Samples</li>
<li>Load Compound Database</li>
<li>Mark Blanks</li>
<li>Alignment</li>
<li>Peak Grouping</li>
<li>Baseline</li>
<li>Mass Spectra</li>
<li>Peak Curation</li>
<li>Guidelines for Peak Picking</li>
<li>Export options</li>
</ul>
</div></blockquote>
<p><strong>Preprocessing</strong></p>
<p>msConvert is a command-line/ GUI tool that is used to convert between various mass spectroscopy
data formats, developed and maintained by proteoWizard. Raw data files obtained from mass
spectrometers need to be converted to certain acceptable formats before processing in El-MAVEN.</p>
<p>Input</p>
<p>msConvert supports the following formats:</p>
<blockquote>
<div><ul class="simple">
<li>.mzXML</li>
<li>.mzML</li>
<li>.RAW Thermofisher</li>
<li>.RAW Walters</li>
<li>.d Agilent</li>
<li>.wiff format ABSciex</li>
</ul>
</div></blockquote>
<p>The settings used for msConvert as a GUI tool are captured in the following screenshots:</p>
<img alt="_images/1.png" src="_images/1.png" />
<p>NOTE: Zlib compression is enabled by default in msConvert. El-MAVEN in its current form does
not support Zlib compression. It is important to uncheck “Use Zlib compression” box.</p>
<p>Output</p>
<p>msConvert can convert to an array of different formats but El-MAVEN primarily uses .mzXML and .mzML formats.</p>
<p><strong>Launch El-MAVEN</strong></p>
<p>Once sample files are ready for processing, launch El-MAVEN.</p>
<img alt="_images/2.png" src="_images/2.png" />
<p><strong>Adjust Global Settings</strong></p>
<p>Global Settings can be changed from the <em>Options</em> dialog (Insert icon). There are 9 tabs in the dialog. Each of these
tabs has parameters related to a different module in El-MAVEN. For example, a tab for Instrumentation
details, a tab for file import settings, et cetera.</p>
<img alt="_images/3.png" src="_images/3.png" />
<p>To know more about the functionality of different tabs and their settings, user can see the
<a class="reference external" href="https://github.com/ElucidataInc/El-MAVEN/wiki/Introduction-to-El-MAVEN-UI#2-global-settings">Widgets page</a>.
Please be sure to set the desired settings before processing an input file.</p>
<p><strong>Load Samples</strong></p>
<p>User can go to File in the Menu, click on <em>Load Samples|Projects|Peaks</em> option in the File menu.
Then navigate to the folder containing the sample data, select all .mzXML or .mzml files and click Open.
A loading bar displays the progress at the bottom.</p>
<img alt="_images/4.png" src="_images/4.png" />
<p>When the samples have loaded, user should see a sample panel on the left side. If it is not displayed
automatically, click on the Show Samples Widget button on the toolbar. El-MAVEN automatically assigns a
color to every sample. User can select/deselect any sample by clicking the checkbox on the left of the
sample name.</p>
<img alt="_images/5.png" src="_images/5.png" />
<p><strong>Load Compound Database</strong></p>
<p>User can click on <em>Compounds</em> option in the leftmost menu, navigate to the folder containing the
standard database file, select the appropriate .csv file and click <em>Open</em>.</p>
<img alt="_images/6.png" src="_images/6.png" />
<p>This is a sample Compound Database:</p>
<p>Screenshot 7</p>
<p>It lists all metabolite names, chemical formula, HMDB ID, and the class/category of compounds they
belong to (if known).</p>
<p><strong>Mark Blanks</strong></p>
<p>The user can mark the blanks by selecting the blank samples from the list on screen, and clicking
on the <em>Set as a Blank Sample</em> icon (Insert icon) in Samples menu.</p>
<img alt="_images/8.png" src="_images/8.png" />
<p>Multiple blanks can be marked together. The blanks will appear black as shown in the image below:</p>
<img alt="_images/9.png" src="_images/9.png" />
<p><strong>Alignment</strong></p>
<p>Prolonged use of the LC column can lead to a drift in retention time across samples. Alignment
shifts the peak Rts in every sample to correct for this drift and brings the peaks closer to
median Rt of the group.</p>
<img alt="_images/10.png" src="_images/10.png" />
<p>In the above image, EIC for a UTP group is displayed. If the samples were aligned, all peaks
would lie at the same RT. Since this is not the case the samples need to be aligned.</p>
<p><em>Alignment visualization</em> (Insert icon) can be used to judge the extent of deviation from median RT.</p>
<img alt="_images/11.png" src="_images/11.png" />
<p>In the above visualization, each box represents a peak from the selected group at its current RT.
Samples are said to be perfectly aligned when all peak boxes lie on the same vertical axis.
The peaks are considerably scattered in the above image and therefore the samples should be aligned
for better grouping of peaks.</p>
<p>Perform Alignment</p>
<p><em>Alignment settings</em> can be adjusted using the Align button (Insert icon). This example was aligned with
<em>Loess fit</em> algorithm with default parameters.</p>
<img alt="_images/12.png" src="_images/12.png" />
<p>Post-alignment the peaks in the group should appear closer to the median Rt of the group.</p>
<img alt="_images/13.png" src="_images/13.png" />
<img alt="_images/14.png" src="_images/14.png" />
<p>Pre-alignment, the peaks were considerably scattered while the aligned peaks lie nearly on the same axis.
User can run alignment again with different parameters if required (or with a different algorithm). Further
details on Alignment settings are available on the
<a class="reference external" href="https://github.com/ElucidataInc/El-MAVEN/wiki/Introduction-to-El-MAVEN-UI#2-global-settings">Widgets page</a>.</p>
<p><strong>Peak Grouping</strong></p>
<p>Peak grouping is an integral part of the El-MAVEN workflow that categorizes all detected peaks into groups
on the basis of certain user-controlled parameters. A group score is calculated for every peak during the
process. The formula for this score takes into account the difference in Rt and intensities between peaks
(smaller difference leads to a better score) and any existing overlap between them (higher extent of overlap
leads to better score). All three parameters have certain weights attached to them that can be controlled by
the user. The formula for the score is shown in the image. More details on it can be found on the
<a class="reference external" href="https://github.com/ElucidataInc/El-MAVEN/wiki/Introduction-to-El-MAVEN-UI#2-global-settings">Widgets page</a>.</p>
<p>Screenshot 15</p>
<p>The above image shows two groups in the EIC window. The highlighted (solid circles) peaks belong to group A,
the peaks to its left with empty circles belong to another group B. The short peaks in group A that are close
to the baseline and peaks in group B come from the same samples. Additionally, the high intensity peaks of group
A have a similar peak shape to group B peaks. These peaks might have been wrongly classified into separate groups
because of the difference in Rt range of the two sets of peaks. The weights attached to difference in Rt and intensities,
and extent of overlap can be adjusted for better grouping.</p>
<p>Grouping parameters can be changed from the Options dialog (Insert icon).</p>
<p>Screenshot 16</p>
<p>Giving less priority to difference in RTs and intensities results in the two groups being merged into a single
group while the peaks that lay close to the baseline are no longer classified as valid peaks.</p>
<p><strong>Baseline</strong></p>
<p>When measuring a number of peaks, it is often more effective to subtract an estimated baseline from the data.
This baseline should be set where ideally no peaks occur. Although sometimes the program sets a particular
baseline such that one or more peaks occur below that baseline value. In the following image, the dashed line
represents each baseline:</p>
<p>Screenshot 17</p>
<p>The corresponding peaks are indicated with solid circles:</p>
<p>Screenshot 18</p>
<p>The baseline correction can be done in the <em>Peak Detection</em> tab by clicking on <em>Options</em> button:</p>
<p>Screenshot 19</p>
<p>Further details on settings can be accessed <a class="reference external" href="https://github.com/ElucidataInc/El-MAVEN/wiki/Introduction-to-El-MAVEN-UI#peak-detection">here</a>.</p>
<p>The user has an option to set Ionization mode to <em>Positive, Negative or Neutral</em> from the top left part of the screen:</p>
<p>Screenshot 20</p>
<p>The <em>m/z</em> option scans the groups to find any specific m/z value and plot its corresponding EIC.
The _+/-_option to its right is to specify the expected mass resolution error in parts per million (ppm).</p>
<p>Screenshot 21</p>
<p><strong>Mass Spectra</strong></p>
<p>Mass Spectra Widget (Insert icon) displays each peak, its mass, and intensity for a scan.
As the widget shows all detected masses in a scan, the ppm window for the EIC and consequently
grouping can be adjusted accordingly. This feature is especially useful for MS/MS data and isotopic detection.</p>
<p>Screenshot 22</p>
<p><strong>Peak Curation</strong></p>
<p>There are multiple ways to curate peaks in El-MAVEN, though following are the two broad workflows:</p>
<blockquote>
<div><ul class="simple">
<li>Manual Peak Curation using Compound DB widget</li>
<li>Automated Peak Curation</li>
</ul>
</div></blockquote>
<p>Manual Peak Curation using Compound DB widget</p>
<p>To use manual curation using the compound DB widget, the user has to iterate over all the compounds in the
compound DB on the extreme left of the window, as highlighted in the image below.</p>
<p>Screenshot 23</p>
<p>Once on a compound, El-MAVEN shows the highest ranked group for that M/Z. The user can now choose a group
or reject it. There are two ways to do this.</p>
<blockquote>
<div><p>In the first workflow, the user needs to double click on the peak group of his choice. This will get
the Rt line to the median of the group and also add the metabolite to the bookmarks table (as shown in the
image below). User can read more about the bookmarks table <a class="reference external" href="https://github.com/ElucidataInc/El-MAVEN/wiki/Introduction-to-El-MAVEN-UI#5-eic-window">here</a>.</p>
<p>Screenshot 24</p>
<p>When the user selects the first group they would be asked if they would like to auto-save the state of
the application. This feature allows the user to go back to his curated peaks if they so wish in future.</p>
<p>Screenshot 25</p>
<p>The other sub-workflow is to mark peaks good or bad from the top of the EIC as shown in the screenshots below.</p>
<p>Screenshot 26</p>
<p>Qualifying peaks as good or bad is explained in the next few sections.</p>
</div></blockquote>
<p>Automated Peak Curation</p>
<p>El-MAVEN can automatically select high intensity and high quality groups. This workflow is called automatic peak
curation. To enable this workflow the user has to click on the peak detection widget present in the top left of
the window. Upon clicking the widget the user will see the following dialog box.</p>
<p>Screenshot 27</p>
<p>This dialog box (Insert icon) is the peak detection widget. The user can read more about it <a class="reference external" href="https://github.com/ElucidataInc/El-MAVEN/wiki/Introduction-to-El-MAVEN-UI#8-peak-detection">here</a>.</p>
<p>Upon selecting the default parameters, the user can click on <em>Find peaks</em> to select the most important peaks.
Once the peak detection is completed a peak table shows up at the bottom of the window.</p>
<p>Screenshot 28</p>
<p>The user can now iterate over these peaks by marking them as good or bad by clicking on the good
or bad buttons present in the peaks table as shown below.</p>
<p>Screenshot 29</p>
<p>Screenshot 30</p>
<p><strong>Guidelines for Peak Picking</strong></p>
<p>1. Peak’s width and shape are two very crucial things to look at while classifying a peak as good
or bad. Peak’s shape should have a Gaussian distribution and width should not be spread across
a wide range of RT.</p>
<blockquote>
<div>Screenshot 31</div></blockquote>
<p>2. Peak Intensities for a group are plotted as bar plots for all the samples. These bar plots have
heights relative to the other samples.Thus, for a good peak the intensities should be high.</p>
<blockquote>
<div>Screenshot 32</div></blockquote>
<p>3. Intensity Barplot heights should be higher for all the samples than Blank samples. We use
intensities of Blank samples to set our group baseline. Blank intensities are used to calibrate
intensity values across zero concentration.</p>
<p>4. A good peak should have standards with varying intensity in a particular fashion (increasing
or decreasing).</p>
<p>5. Quality Control (QC) samples give us information about the quality of the data, i.e., it assesses
reproducibility and software performance. Samples whose intensities and concentrations are already known
are used as QCs to determine if the instrument are working as expected. Values (and scales) can be
calibrated using QCs.</p>
<p>6. If peak groups of a particular metabolite are separated apart (Not aligned well) then we should use
stringent alignment parameters to overcome this problem.</p>
<p>7. For a particular metabolite, let’s say if it has n number of groups, then the group which is much
closer to the above guidelines should be selected as good peak. Multiple groups can also be selected in
case of ambiguity (if Rt information is not provided).</p>
<p><strong>Export options</strong></p>
<p>There are multiple export options available for storing marked peak data. User can either
generate a PDF report to save the EIC for every metabolite, export data for a particular group
in .csv format, or export the EICs to a Json file as shown below.</p>
<p>Screenshot 33</p>
<p>User can select <em>All, Good, Bad or Selected</em> peaks to export.</p>
<p>Screenshot 34</p>
<p>The <em>Export Groups to CSV</em> option (Insert icon) lets the user save the ‘good’/’bad’ labels along with the peak
table. User also has the option to filter out rows that have a certain label while exporting the table.</p>
<p><em>Generate PDF Report</em> option (Insert icon) saves all EICs with their corresponding bar plots in a PDF file.</p>
<p><em>Export EICs to Json</em> option (Insert icon) exports all EICs to a Json file.</p>
<p>Another option is to export the peak data in .mzroll format that can be directly loaded into
El-MAVEN by clicking on the Load <em>Samples|Projects|Peaks</em> option in the File menu. For this, go to the
File option in the menu bar, and click on ‘<em>Save Project</em>’.</p>
<p>Screenshot 35</p>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Readme</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="Build.html">Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="ElMAVENFeatures.html">El-MAVEN Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="BugsandFeatureRequests.html">Bugs and Feature Requests</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Documentation.html">User Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="GitRepository.html">Git Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="IntroductiontoElMAVENUI.html">El-MAVEN User Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="IntroductiontoElMAVENCLI.html">El-MAVEN Command Line Interface</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Unlabeled LC-MS Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="LabeledLCMSWorkflow.html">Labeled LC-MS Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="LabeledLCMSMSWorkflow.html">Labeled LC-MS/MS Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="LabeledMSMSValidation.html">Labeled MS/MS Validation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="Contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="References.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="Acknowledgement.html">Acknowledgement</a></li>
<li class="toctree-l1"><a class="reference internal" href="CopyrightandLicense.html">Copyright and License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Issues.html">Issues</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="Documentation.html">User Documentation</a><ul>
      <li>Previous: <a href="IntroductiontoElMAVENCLI.html" title="previous chapter">El-MAVEN Command Line Interface</a></li>
      <li>Next: <a href="LabeledLCMSWorkflow.html" title="next chapter">Labeled LC-MS Workflow</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Avijit Zutshi.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.9</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="_sources/UnlabeledLCMSWorkflow.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>